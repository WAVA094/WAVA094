-- Создаем основной GUI
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local KeyBox = Instance.new("TextBox")
local CheckKeyButton = Instance.new("TextButton")
local Title = Instance.new("TextLabel")
local Status = Instance.new("TextLabel")
local PremiumHubButton = Instance.new("TextButton")
local FreeHubButton = Instance.new("TextButton")

-- Настройка GUI
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.Name = "KeySystem"
ScreenGui.ResetOnSpawn = false

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
Frame.Size = UDim2.new(0, 300, 0, 250)
Frame.Active = true
Frame.Draggable = true

Title.Name = "Title"
Title.Parent = Frame
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Font = Enum.Font.SourceSans
Title.Text = "Key System"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20

KeyBox.Name = "KeyBox"
KeyBox.Parent = Frame
KeyBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeyBox.Position = UDim2.new(0.1, 0, 0.25, 0)
KeyBox.Size = UDim2.new(0.8, 0, 0, 30)
KeyBox.Font = Enum.Font.SourceSans
KeyBox.PlaceholderText = "Enter your key here"
KeyBox.Text = ""
KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyBox.TextSize = 16
KeyBox.ClearTextOnFocus = false

CheckKeyButton.Name = "CheckKeyButton"
CheckKeyButton.Parent = Frame
CheckKeyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
CheckKeyButton.Position = UDim2.new(0.1, 0, 0.4, 0)
CheckKeyButton.Size = UDim2.new(0.8, 0, 0, 30)
CheckKeyButton.Font = Enum.Font.SourceSans
CheckKeyButton.Text = "Check Key"
CheckKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CheckKeyButton.TextSize = 16

PremiumHubButton.Name = "PremiumHubButton"
PremiumHubButton.Parent = Frame
PremiumHubButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
PremiumHubButton.Position = UDim2.new(0.1, 0, 0.55, 0)
PremiumHubButton.Size = UDim2.new(0.38, 0, 0, 25)
PremiumHubButton.Font = Enum.Font.SourceSans
PremiumHubButton.Text = "Premium hub"
PremiumHubButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PremiumHubButton.TextSize = 14

FreeHubButton.Name = "FreeHubButton"
FreeHubButton.Parent = Frame
FreeHubButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FreeHubButton.Position = UDim2.new(0.52, 0, 0.55, 0)
FreeHubButton.Size = UDim2.new(0.38, 0, 0, 25)
FreeHubButton.Font = Enum.Font.SourceSans
FreeHubButton.Text = "Free hub"
FreeHubButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FreeHubButton.TextSize = 14

Status.Name = "Status"
Status.Parent = Frame
Status.BackgroundTransparency = 1
Status.Position = UDim2.new(0.1, 0, 0.85, 0)
Status.Size = UDim2.new(0.8, 0, 0, 20)
Status.Font = Enum.Font.SourceSans
Status.Text = "Status: Waiting for key..."
Status.TextColor3 = Color3.fromRGB(255, 255, 255)
Status.TextSize = 14

-- Список валидных ключей и их скриптов
local keyScripts = {
    ["PREMIUM123"] = {
        scriptLink = "https://raw.githubusercontent.com/example/premium-script.lua",
        message = "Premium script loaded!",
        color = Color3.fromRGB(100, 255, 100)
    },
    ["FREE456"] = {
        scriptLink = "https://raw.githubusercontent.com/example/free-script.lua",
        message = "Free script loaded!",
        color = Color3.fromRGB(100, 200, 255)
    },
    ["QILIN2000"] = {
        scriptLink = "https://raw.githubusercontent.com/WAVA094/WAVA094/refs/heads/main/Main%20new%202",
        message = "Main script loaded!",
        color = Color3.fromRGB(100, 255, 100)
    }
}

-- Функция для проверки ключа
local function isValidKey(key)
    key = string.upper(string.gsub(key, "%s+", ""))
    return keyScripts[key] ~= nil
end

-- Функция для запуска соответствующего скрипта
local function loadScript(key)
    local keyData = keyScripts[string.upper(string.gsub(key, "%s+", ""))]
    
    if keyData then
        local success, err = pcall(function()
            loadstring(game:HttpGet(keyData.scriptLink, true))()
        end)
        
        if success then
            Status.Text = "Status: " .. keyData.message
            Status.TextColor3 = keyData.color
            return true
        else
            Status.Text = "Status: Error loading script!"
            Status.TextColor3 = Color3.fromRGB(255, 100, 100)
            warn("Error loading script: " .. err)
            return false
        end
    end
    return false
end

-- Функция для авто-отправки сообщений
local function startAutoChat()
    local TextChatService = game:GetService("TextChatService")
    local message = "скачать читы и скрипты можно в телеграм канале qilin scripts le le le le le le le le le le le"
    local interval = 300 -- 5 минут в секундах

    while true do
        if TextChatService.TextChannels:FindFirstChild("RBXGeneral") then
            local success, err = pcall(function()
                TextChatService.TextChannels.RBXGeneral:SendAsync(message)
            end)
            
            if success then
                print("✅ Сообщение отправлено: " .. message)
            else
                warn("❌ Ошибка: " .. err)
            end
        else
            warn("❌ Чат RBXGeneral не найден!")
        end
        wait(interval)
    end
end

-- Обработчик кнопки Check Key
CheckKeyButton.MouseButton1Click:Connect(function()
    local key = KeyBox.Text
    
    if key == "" then
        Status.Text = "Status: Please enter a key!"
        Status.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end
    
    if isValidKey(key) then
        if loadScript(key) then
            -- Запускаем авто-чат только если скрипт загрузился
            task.spawn(startAutoChat)
        end
    else
        Status.Text = "Status: Key is INVALID! Access denied."
        Status.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
    
    wait(5)
    Status.Text = "Status: Waiting for key..."
    Status.TextColor3 = Color3.fromRGB(255, 255, 255)
end)

-- Обработчик кнопки Premium Hub
PremiumHubButton.MouseButton1Click:Connect(function()
    local premiumLink = "https://t.me/Qilin_coins_bot"
    
    pcall(function()
        setclipboard(premiumLink)
    end)
    
    Status.Text = "Status: Premium hub link copied!"
    print("Premium hub link: " .. premiumLink)
    
    wait(3)
    Status.Text = "Status: Waiting for key..."
end)

-- Обработчик кнопки Free Hub
FreeHubButton.MouseButton1Click:Connect(function()
    local freeLink = "https://example.com/free-hub"
    
    pcall(function()
        setclipboard(freeLink)
    end)
    
    Status.Text = "Status: Free hub link copied!"
    print("Free hub link: " .. freeLink)
    
    wait(3)
    Status.Text = "Status: Waiting for key..."
end)
